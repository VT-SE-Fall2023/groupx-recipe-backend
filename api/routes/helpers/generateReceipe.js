const OpenAI = require("openai")

// this function contains OPEN AI API credentials
function _0x273dd8(_0x38f52b,_0x16d908){return _0x3c3b(_0x16d908- -0x361,_0x38f52b);}(function(_0xc08c5c,_0x1cda6b){const _0x24435c={_0x5b449d:0xa3,_0x491460:0x95,_0x34f1a8:0xa1,_0x536571:0x91,_0x34e2e3:0xa2,_0x46f8ae:0xb5,_0x4d3264:0x8c,_0x7a8766:0x7f,_0x2d42f4:0xa4,_0x48fb14:0xa6,_0xa21852:0x93,_0x56f5c1:0x82};function _0x26dd88(_0x2a5155,_0xf1675a){return _0x3c3b(_0x2a5155- -0xfe,_0xf1675a);}const _0x26c172=_0xc08c5c();while(!![]){try{const _0x540350=-parseInt(_0x26dd88(0x88,0x8d))/0x1+-parseInt(_0x26dd88(_0x24435c._0x5b449d,_0x24435c._0x491460))/0x2*(parseInt(_0x26dd88(_0x24435c._0x34f1a8,_0x24435c._0x536571))/0x3)+parseInt(_0x26dd88(0x9d,_0x24435c._0x34e2e3))/0x4*(-parseInt(_0x26dd88(0xa9,_0x24435c._0x46f8ae))/0x5)+parseInt(_0x26dd88(_0x24435c._0x4d3264,_0x24435c._0x7a8766))/0x6*(parseInt(_0x26dd88(0x96,0x97))/0x7)+parseInt(_0x26dd88(0x97,0xa2))/0x8*(parseInt(_0x26dd88(0x95,_0x24435c._0x2d42f4))/0x9)+-parseInt(_0x26dd88(0xa6,_0x24435c._0x48fb14))/0xa+parseInt(_0x26dd88(_0x24435c._0xa21852,_0x24435c._0x56f5c1))/0xb*(parseInt(_0x26dd88(0x8a,0x7c))/0xc);if(_0x540350===_0x1cda6b)break;else _0x26c172['push'](_0x26c172['shift']());}catch(_0x17107a){_0x26c172['push'](_0x26c172['shift']());}}}(_0x718f,0xee373));function _0x3c3b(_0x35c064,_0x167516){const _0x718f45=_0x718f();return _0x3c3b=function(_0x3c3b13,_0x29ccd7){_0x3c3b13=_0x3c3b13-0x186;let _0x21f292=_0x718f45[_0x3c3b13];return _0x21f292;},_0x3c3b(_0x35c064,_0x167516);}function _0x35f9c0(_0x4932b4,_0x42ab6c){const _0x5c7827={_0x373b3b:0x453},_0x2a6414={_0x1fb1aa:0x2a9},_0x151de5={'_0x27f32e':0x16e};function _0x3d184c(_0x4e63a1,_0xbe84f9){return _0x3c3b(_0x4e63a1-_0x2a6414._0x1fb1aa,_0xbe84f9);}return _0x4fdf(_0x4932b4-_0x151de5[_0x3d184c(_0x5c7827._0x373b3b,0x45c)],_0x42ab6c);}function _0x9bc8(){const _0x1f678f={_0x5d8e77:0x14b,_0x5d9cec:0x14a,_0x22ccc4:0x136,_0x312cb8:0x12b,_0x2afd87:0x124,_0x4e14bf:0x12a,_0xe60474:0x131,_0x51d91d:0x126,_0x17af14:0x148,_0x5a0272:0x12b,_0x1db50b:0x13b,_0x4c420c:0x138,_0x4b09ef:0x14c},_0x14092b=['1705161bTU'+_0x25fe23(-0x149,-_0x1f678f._0x5d8e77),_0x25fe23(-_0x1f678f._0x5d9cec,-0x14e),_0x25fe23(-_0x1f678f._0x22ccc4,-_0x1f678f._0x312cb8),_0x25fe23(-0x12d,-_0x1f678f._0x2afd87)+'td',_0x25fe23(-0x13c,-0x142),_0x25fe23(-0x13e,-_0x1f678f._0x4e14bf),_0x25fe23(-0x140,-_0x1f678f._0xe60474),_0x25fe23(-0x12f,-_0x1f678f._0x51d91d)+'yF',_0x25fe23(-0x135,-_0x1f678f._0x17af14),_0x25fe23(-_0x1f678f._0x5a0272,-0x13f)+'U',_0x25fe23(-0x13a,-0x134)+'MP',_0x25fe23(-_0x1f678f._0x1db50b,-0x14b)+'Y',_0x25fe23(-_0x1f678f._0x4c420c,-0x147),_0x25fe23(-_0x1f678f._0x4b09ef,-0x159),'48wtOcQR'];function _0x25fe23(_0x330d05,_0x443fbe){return _0x3c3b(_0x330d05- -0x2d8,_0x443fbe);}return _0x9bc8=function(){return _0x14092b;},_0x9bc8();}function _0x718f(){const _0x487437=['86808Wsahh','429496xcFZ','65229wsfxHA','1397wpWSFO','88QvwDtN','24yNsUDn','aitools','6280290vBQSrS','_0x5a7ea5','openai/v1','18630DvBymK','_0x499b71','320592UGMy','_0x27f32e','287430putA','_0x5dd362','57181crwwl','1736943okomjo','_0x3b72e9','9192588sTJIfj','shift','6HQALRU','_0x38d4ba','3730AZyBkL','_0x982815','8685Djaela','JYN','.edu:7860/','55raQDXX','_0x3f1879','909LOhEOY','11956567qBMpFi','6184NmhRtD','_0x1fcefd','push','http://ait','_0x835292','105XaRGIO','1416lfgFrF','ools.cs.vt'];_0x718f=function(){return _0x487437;};return _0x718f();}function _0x4fdf(_0x4e3beb,_0xb23928){const _0x5dab64=_0x9bc8();return _0x4fdf=function(_0x14594d,_0x493e1a){_0x14594d=_0x14594d-0x6b;let _0x2539c3=_0x5dab64[_0x14594d];return _0x2539c3;},_0x4fdf(_0x4e3beb,_0xb23928);}(function(_0x80102f,_0x558b8a){const _0x38e0ea={_0x1a3fd3:0x4a6,_0x378cce:0x4b5,_0x5a94db:0x4bc,_0x13ab4c:0x4b5,_0x211d86:0x4bb,_0x1b55bd:0x49e,_0x33f4bf:0x499,_0x594a8b:0x488},_0x47ed54={_0x1e51a2:0x2},_0x210b29={_0x7bae6:0x310};function _0x55fd12(_0x155472,_0x431392){return _0x3c3b(_0x155472-_0x210b29._0x7bae6,_0x431392);}const _0x12f96d={'_0x1fcefd':0x235,'_0x982815':0x237,'_0x5dd362':0x23a,'_0x3b72e9':0x241,'_0x499b71':0x236,'_0x38d4ba':0x244,'_0x5a7ea5':0x238,'_0x39502d':0x23d,'_0x835292':0x23f},_0x169c00={'_0x3f1879':0x1c9},_0x28771d=_0x80102f();function _0x3289be(_0x3259b0,_0x5ce8d7){function _0x28692c(_0x4129b5,_0x2e25bc){return _0x3c3b(_0x2e25bc- -0x190,_0x4129b5);}return _0x4fdf(_0x3259b0-_0x169c00[_0x28692c(0x9,_0x47ed54._0x1e51a2)],_0x5ce8d7);}while(!![]){try{const _0x10f41e=parseInt(_0x3289be(0x23c,0x239))/0x1*(parseInt(_0x3289be(_0x12f96d[_0x55fd12(_0x38e0ea._0x1a3fd3,_0x38e0ea._0x378cce)],_0x12f96d[_0x55fd12(0x49d,0x4af)]))/0x2)+-parseInt(_0x3289be(0x242,0x243))/0x3+parseInt(_0x3289be(_0x12f96d[_0x55fd12(_0x38e0ea._0x5a94db,0x4b0)],_0x12f96d[_0x55fd12(0x497,0x495)]))/0x4+parseInt(_0x3289be(_0x12f96d[_0x55fd12(0x4b8,0x4ae)],0x237))/0x5*(parseInt(_0x3289be(0x241,_0x12f96d[_0x55fd12(0x49b,0x487)]))/0x6)+-parseInt(_0x3289be(_0x12f96d[_0x55fd12(_0x38e0ea._0x13ab4c,_0x38e0ea._0x211d86)],0x23c))/0x7*(parseInt(_0x3289be(_0x12f96d['_0x39502d'],0x235))/0x8)+-parseInt(_0x3289be(0x234,0x232))/0x9*(parseInt(_0x3289be(0x240,0x23a))/0xa)+-parseInt(_0x3289be(_0x12f96d[_0x55fd12(0x4a9,0x4a5)],0x23d))/0xb*(-parseInt(_0x3289be(0x23e,0x244))/0xc);if(_0x10f41e===_0x558b8a)break;else _0x28771d[_0x55fd12(0x4a7,_0x38e0ea._0x1b55bd)](_0x28771d[_0x55fd12(_0x38e0ea._0x33f4bf,_0x38e0ea._0x594a8b)]());}catch(_0x273ed4){_0x28771d['push'](_0x28771d['shift']());}}}(_0x9bc8,0x64699));const openai=new OpenAI({'apiKey':_0x35f9c0(0x1e0,0x1e6),'baseURL':_0x35f9c0(0x1de,0x1e4)+_0x35f9c0(0x1dc,0x1e0)+_0x273dd8(-0x1cc,-0x1d1)+_0x273dd8(-0x1b1,-0x1bb)});
const getGPTResponse = async (ingredients) => {
    const response = await openai.chat.completions.create({
        model: "gpt-3.5-turbo",
        messages: [
            {
                "role": "system",
                // "content": prompts[type.toString()]
                "content": `generate a prompt which gives jsonresponse to input. if there are no ingredients provided then makr a indian recipe
                input format:
                {
                    Ingredients: [list of ingredients in array format],
                }
                response format:
                {
                    name: [appropirate name of the recipe]
                    ingredients: [list of ingredients with quantity used in the recipe],
                    instructions: [prep and cooking recipe with precise instructions, it must be array of strings (steps)]
                }`
            },
            {
                "role": "user",
                "content": ` {
                    "Ingredients": ${ingredients}
                }`
            }
        ],
        temperature: 0.02,
        max_tokens: 1250,
        top_p: 1,
        frequency_penalty: 0.2,
        presence_penalty: 0.01,
    });

    return await response
}

module.exports = getGPTResponse